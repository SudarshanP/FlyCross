<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Title Goes Here</title>
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css">
<link rel="stylesheet" href="css/cross.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="json/cross.json"></script>
<script type="text/javascript" src="json/punnettColors.json"></script>
<script type="text/javascript" src="js/coffee-script.js"></script>
<script type="text/javascript" src="js/handlebars.js"></script>
<script type="text/javascript" src="js/bootstrap-twipsy.js"></script>
<script type="text/javascript" src="js/bootstrap-popover.js"></script>
<!--script type="text/coffeescript" src="coffee/parser.coffee"></script-->
<script type="text/coffeescript" src="coffee/input.coffee"></script>
<script type="text/coffeescript" src="coffee/output.coffee"></script>
<script type="text/javascript" src="js/ajax.js"></script>
<!--script type="text/javascript" src="punnett.json"></script-->
<script type='text/javascript'>
handler = function(data) {
    //$("#response").text(data)
    //window.punnet = JSON.parse(data)
    showPunnett(JSON.parse(data))
}

</script>

<script id="chromosomeTpl" type="text/x-handlebars-template">
   {{#each this}}
      <span class="gene">{{this}}</span>
   {{/each}}
</script>



<script id="flyPanelTpl" type="text/x-handlebars-template">
<div>
   {{#if lethal}}
      <span class="label important">Lethal</span>
   {{/if}}
   {{#if sterile}}
      <span class="label warning">Sterile</span>
   {{/if}}
   {{#if markerInterference}}
      <span class="label notice">Interfering markers</span>
   {{/if}}
   <br/>
   <span style="background-color:{{pColor}}">&nbsp;&nbsp;&nbsp;&nbsp;</span> Phenotype: {{phenotype}}<br/>
   <span style="background-color:{{gColor}}">&nbsp;&nbsp;&nbsp;&nbsp;</span> Genotype: {{genotype}}<br/>
   {{#if warnings}}
      {{#each warnings}}
         <B>{{this}}</B><br>
      {{/each}}
   {{/if}}
</div>
</script>

<style>

</style>
<script id="punHdrTpl" type="text/x-handlebars-template">
      <tr><td>{{#each fly2Axis}}</td><td style="padding-bottom:5px;height:100px; vertical-align:bottom;"><div class ="vert">{{this}}</div>{{/each}}</td></tr>
</script>
<script id="punRowTpl" type="text/x-handlebars-template">
      <tr class="punRow" ><td>{{gamete}}{{#each flies}}</td><td align="center" class="punCell"><div class="pDiv"><div class="gDiv"></div></div>{{/each}}</td></tr>
</script>
<script id="punTpl" type="text/x-handlebars-template">
    <table class ="punTbl" id='punTable'>
        {{{hdr}}}
        {{#each rows}}{{{this}}}{{/each}}
    </table>
</script>
<script id="legendTpl" type="text/x-handlebars-template">
    <h2>{{title}}</h2>
    <table border="2">
        {{#each rows}}{{{this}}}{{/each}}
    </table>
</script>
<script id="legendRowTpl" type="text/x-handlebars-template">
   <tr><td>{{txt}}</td><td style="background-color:{{color}};width:15px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
</script>

<script type="text/coffeescript">
window.inputMode = -> $("#output").hide();$("#input").show()
window.outputMode = -> $("#input").hide();$("#output").show()
$ ->
   window.punnettReq = {}
   inputMode()
   $("#father").blur -> validateFly("father","M")
   $("#mother").blur -> validateFly("mother","F")
   $("#child").blur -> validateFly("child")
</script>

</head>
<body>

<div id="input">
Dummy test cross: <input type='text' id='crossNo' value='cross2'><input type='submit' value='Load' onClick='loadDummy();return false'  class="btn primary"/>
<form>
<div class="row">
     <div class='span8'>
       <div id="fatherBox" class="clearfix"> 
             <label for="errorInput">Male</label><!--span>Male</span--> 
             <input id="father" name="xlInput" size="30" type="text" /><span id="fatherMsg" class="help-inline"></span>
       </div><!-- /clearfix --> 
       <div align="center" id='ofather'></div>
       <div id="motherBox" class="clearfix"> 
             <label for="errorInput">Female</label> 
             <input id="mother" name="xlInput" size="30" type="text" /><span id="motherMsg" class="help-inline"></span>
       </div><!-- /clearfix --> 
       <div align="center" id='omother'></div>
       <div id="childBox" class="clearfix"> 
             <label for="errorInput">Progeny</label> 
             <input id="child" name="xlInput" size="30" type="text" /><span id="childMsg" class="help-inline"></span>
       </div><!-- /clearfix --> 
       <div align="center" id='ochild'></div>

       Balancers: <input type='text' id='balancers' value=''> <input type='submit' value='Ok' onClick='parseBalancers(); return false'  class="btn primary mini"/><br>
       <div id="oBalancers"></div>
       Markers: <input type='text' id='markers' value=''> <input type='submit' value='Ok' onClick='parseMarkers(); return false'  class="btn primary mini"/><br>
       <div id="oMarkers"></div>
     </div>
     <div class='span8'>
       <h2>Constraints</h2>
       <textarea cols=50 rows=20 id='constraints'></textarea>
     </div>
</div>
</form>

<input type='button' value='Make Punnett Square' onClick='makePunnett();return false' class="btn primary"/>
</div>
<div id='response'></div>
<div id="output">
<input type='submit' value='Back' onClick='inputMode();return false'  class="btn primary"/>
<div class="row">
  <div id="punSqr" class="span8"></div>
  <div id="punHoverMsg" class="span8"></div>
</div>
<div class="row">
   <div  class="span8" id="pLegend"></div>   
</div>
</div>
<!--div class="row">
   <table class='rot'>
      <tr><td>Fly1</td></tr>
      <tr><td>Fly1</td></tr>
      <tr><td>Fly1</td></tr>
      <tr><td>Fly1</td></tr>
      <tr><td>Fly1</td></tr>
   </table>
</div-->
</body>
</html>
